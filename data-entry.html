<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Entry</title>
    <link rel="stylesheet" href="styles/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <script>
        // Check authentication before page loads
        if (!sessionStorage.getItem('auth_session')) {
            const currentPage = encodeURIComponent(window.location.pathname);
            window.location.href = `auth.html?returnUrl=${currentPage}`;
        }
    </script>
    <div class="home-button-container">
        <a href="index.html" class="home-button">Home</a>
    </div>
    <header>
        <h1>Data Entry</h1>
    </header>
    <div class="tab-container">
        <button class="tab-button active" data-tab="fresh">Fresh Data Entry</button>
        <button class="tab-button" data-tab="edit">Edit Work Details</button>
    </div>

    <main>
        <!-- Fresh Data Entry Form -->
        <section id="freshEntry" class="form-container tab-content active">
            <form id="freshDataForm">
                <h2>Fresh Data Entry</h2>
                <label for="scheme">Scheme: (રેતી કાંકરી માટે :Sand Gravel Scheme પસંદ કરવુ )</label>
                <select id="scheme" name="scheme" required>
                    <option value="" disabled selected>Select a scheme</option>
                    <option value="finance_commission">Finance Commission Scheme</option>
                    <option value="stamp_duty">Stamp Duty Scheme</option>
                    <option value="sand_gravel">Sand Gravel Scheme</option>
                </select>

                <label for="year">Year: (૨૦૨૪-૨૫ ના કામો માટે ૨૦૨૪ :: ૨૦૨૫-૨૬ ના કામો માટે ૨૦૨૫ )</label>
                <select id="year" name="year" required>
                    <option value="" disabled selected>Select year</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                </select>

                <label for="workId">Work ID: (પ્રાથમીક મંજુરી ના આદેશ મુજબ નો ક્રમાંક લખવો, દા.ત ક્રમ ૫ ને 5 અને ૧૨ ને 12 )</label>
                <input type="text" id="workId" name="workId" required>

                <label for="talukaName">Taluka Name:</label>
                <select id="talukaName" name="talukaName" required>
                    <option value="" disabled selected>Select a taluka</option>
                    <option value="Gandhinagar">Gandhinagar</option>
                    <option value="Mansa">Mansa</option>
                    <option value="Dahegam">Dahegam</option>
                    <option value="Kalol">Kalol</option>
                </select>

                <label for="villageName">Village Name:</label>
                <select id="villageName" name="villageName" required></select>

                <label for="workType">Work Type:</label>
                <select id="workType" name="workType" required>
                    <option value="" disabled selected>Select work type</option>
                    <option value="cc_road">CC Road</option>
                    <option value="paver_block">Paver Block</option>
                    <option value="drainage_work">Drainage Work</option>
                </select>

                <label for="workName">Work Name:(ગુજરાતી મા લખી શકાય છે) </label>
                <input type="text" id="workName" name="workName" required>

                <label for="amount">Amount to be Allocated: (રુપીયા ના આંકડા અંગ્રેજીમાં લખવા) </label>
                <input type="number" id="amount" name="amount" required>

                <label for="primaryApprovalDate">Date of Primary Approval:</label>
                <input type="date" id="primaryApprovalDate" name="primaryApprovalDate" required>

                <button type="submit">Submit</button>
            </form>
        </section>

        <!-- Edit Work Details Form -->
        <section id="editEntry" class="form-container tab-content">
            <form id="searchForm">
                <h2>Search Work Details</h2>
                <label for="editScheme">Scheme:</label>
                <select id="editScheme" name="scheme" required>
                    <option value="" disabled selected>Select a scheme</option>
                    <option value="finance_commission">Finance Commission Scheme</option>
                    <option value="stamp_duty">Stamp Duty Scheme</option>
                    <option value="sand_gravel">Sand Gravel Scheme</option>
                </select>

                <label for="editYear">Year:</label>
                <select id="editYear" name="year" required>
                    <option value="" disabled selected>Select year</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                </select>

                <label for="editWorkId">Work ID:</label>
                <input type="text" id="editWorkId" name="workId" required>

                <button type="submit">Search</button>
            </form>

            <form id="editForm" style="display: none;">
                <!-- This will be populated with all fields when search is successful -->
            </form>
        </section>
    </main>
    <script type="module" src="scripts/form-handler.js"></script>
</body>
</html>
